{"version":3,"sources":["webpack:///src/module-manage/components/menu-add.vue","webpack:///./src/module-manage/components/menu-add.vue?1664","webpack:///./src/module-manage/components/menu-add.vue","webpack:///./src/components/TreeTable/utils/dataTranslate.js"],"names":["_this","menu_add","name","props","treeStructure","type","Boolean","default","text","String","pageTitle","PermissionGroupsList","Array","data","showMenuBlock","showPointBlock","dialogFormVisible","typeStatus","notPointDataList","parentDataList","formMenu","pid","is_point","code","title","formPoints","codepast","ruleInline","required","message","trigger","validator","validateCode","rule","value","callback","thisCode","Error","ifHave","thisPid","ifHaveCodeExciting","oldList","i","length","childs","points","id","doPoints","leafCount","computed","methods","dialogFormV","this","dialogFormH","handleChooseType","changeToMenu","changeToPoints","changeType","flag","changeArays","changeAray","oldArray","undefined","push","handleClose","$emit","handle_Edit","object","_this2","Object","menus","then","select_Add","_this3","handleResetForm","handle_Add","handleSubmit","_this4","Number","$refs","validateField","validate","valid","$Message","error","dataRest","obj","j","$set","hanldeEditForm","objeditId","_this5","responseData","_this6","mounted","created","updated","components_menu_add","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","visible","on","update:visible","$event","ref","staticStyle","width","margin-left","rules","model","label-position","label-width","label","$t","change","$$v","expression","disabled","_v","_l","items","key","class","layer","prop","_e","slot","click","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","DataTransfer","treeToArray","parent","level","expandedAll","tmp","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from___default","forEach","record","_expanded","Vue","set","_level","concat"],"mappings":"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","file":"static/js/10.5bad2bf427f05e9c5563.js","sourcesContent":["<template>\n  <div class=\"add-form\">\n    <el-dialog :title=\"text+pageTitle\" :visible.sync=\"dialogFormVisible\">\n    <el-form :rules=\"ruleInline\" ref=\"formMenu\" :model=\"formMenu\" label-position=\"left\" label-width=\"120px\" style='width: 400px; margin-left:120px;'>\n          <el-form-item :label=\"$t('table.permissionUser')\">\n              <el-radio-group v-model=\"type\" class=\"choose-type\" @change=\"handleChooseType\">\n                <el-radio label=\"menu\" class=\"choose-item\" :disabled=\"typeStatus\">菜单</el-radio>\n                <el-radio label=\"points\" class=\"choose-item\" :disabled=\"typeStatus\">权限点</el-radio>\n              </el-radio-group>\n          </el-form-item>\n          <el-form-item :label=\"$t('table.permissionUser')\">\n              <el-select v-model=\"formMenu.pid\">\n                <el-option :value=\"0\" :label=\"$t('table.powerNav')\">主导航</el-option>\n                <el-option v-for=\"(items) in notPointDataList\" :value=\"items.id\" :key=\"items.id\" :label=\"items.title\" :disabled=\"(type === 'points') && !!(items.childs)\" :class=\"'moveIn'+items.layer\">\n                </el-option>\n              </el-select>\n\n            </el-form-item>\n          <div v-if=\"showMenuBlock\">\n            <el-form-item :label=\"$t('table.powerCode')\" prop=\"code\">\n              <el-input v-model=\"formMenu.code\"></el-input>\n            </el-form-item>\n            <el-form-item :label=\"$t('table.powerTitle')\" prop=\"title\">\n              <el-input v-model=\"formMenu.title\"></el-input>\n            </el-form-item>\n          </div>\n          <div v-if=\"showPointBlock\" :model=\"formPoints\">\n            <el-form-item :label=\"$t('table.powerCode')\" prop=\"code\">\n              <el-input v-model=\"formPoints.code\"></el-input>\n            </el-form-item>\n            <el-form-item :label=\"$t('table.powerTitle')\" prop=\"title\">\n              <el-input v-model=\"formPoints.title\"></el-input>\n            </el-form-item>\n          </div>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"handleClose\">{{$t('table.cancel')}}</el-button>\n          <el-button type=\"primary\" @click=\"handleSubmit('formMenu')\">{{$t('table.confirm')}}</el-button>\n        </div>\n  </el-dialog>\n  \n  </div>\n</template>\n<script>\nimport { list, detail, update, add } from '@/api/base/menus'\nimport Utils from '@/components/TreeTable/utils/dataTranslate.js'\nlet _this = []\nexport default {\n  name: 'items',\n  // props: ['text', 'pageTitle', 'PermissionGroupsList',],\n  props: {\n    treeStructure: {\n      type: Boolean,\n      default: function() {\n        return false\n      }\n    },\n    // 这个是是否展示操作列\n    text: {\n      type: String\n    },\n    pageTitle: {\n      type: String\n    },\n    PermissionGroupsList: {\n      type: Array\n    }\n  },\n  data() {\n    const validateCode = (rule, value, callback) => {\n      var thisCode = _this.formMenu.code\n      if (value === '') {\n        callback(new Error('代码不能为空'))\n      } else {\n        validateCode.ifHave = false\n        var thisPid = _this.formMenu.pid\n        validateCode.ifHaveCodeExciting = function(oldList) {\n          for (var i = 0; i < oldList.length; i++) {\n            if (oldList[i].childs && oldList[i].childs.length > 0) {\n              validateCode.ifHaveCodeExciting(oldList[i].childs)\n            }\n            if (oldList[i].points && oldList[i].points.length > 0) {\n              if (oldList[i].id === thisPid) {\n                validateCode.doPoints(oldList[i].points)\n              }\n            }\n          }\n        }\n        validateCode.doPoints = function(points) {\n          for (var i = 0; i < points.length; i++) {\n            if (points[i].code && points[i].code === thisCode) {\n              validateCode.ifHave = true\n            }\n          }\n        }\n        validateCode.ifHaveCodeExciting(_this.parentDataList)\n        callback()\n        // if (validateCode.ifHave) {\n        //   callback(new Error('此代码已存在，不能添加相同的！！'))\n        // } else {\n        //   callback()\n        // }\n      }\n    }\n    return {\n      type: 'menu',\n      showMenuBlock: true,\n      showPointBlock: false,\n      dialogFormVisible: false,\n      typeStatus: false,\n      notPointDataList: [],\n      parentDataList: [],\n      formMenu: {\n        pid: '', // 父级Id\n        is_point: '', // 是否权限点\n        code: '', // 菜单代码\n        title: '' // 标题\n      },\n      formPoints: {\n        pid: '', // 父级Id\n        is_point: '', // 是否权限点\n        code: '', // 菜单代码\n        title: '' // 标题\n      },\n      codepast: '',\n      ruleInline: {\n        title: [{ required: true, message: '标题不能为空', trigger: 'blur' }],\n        code: [{ required: true, validator: validateCode, trigger: 'blur' }]\n      },\n      leafCount: []\n    }\n  },\n  computed: {},\n  methods: {\n    // 弹层显示\n    dialogFormV() {\n      this.dialogFormVisible = true\n    },\n    // 弹层隐藏\n    dialogFormH() {\n      this.dialogFormVisible = false\n    },\n    handleChooseType() {\n      if (this.type === 'menu') {\n        _this.changeToMenu()\n      }\n      if (this.type === 'points') {\n        _this.changeToPoints()\n      }\n    },\n    changeType(flag) {\n      if (flag === 'menu') {\n        this.type = 'menu'\n        _this.changeToMenu()\n      }\n      if (flag === 'points') {\n        this.type = 'points'\n        _this.changeToPoints()\n      }\n      this.typeStatus = true\n    },\n    changeArays() {\n      var changeAray = oldArray => {\n        for (var i = 0; i < oldArray.length; i++) {\n          // 数据没有code并且没有子元素时\n          if (oldArray[i].code !== undefined) {\n            _this.notPointDataList.push(oldArray[i])\n          }\n          // 数据有子元素时\n          if (oldArray[i].childs && oldArray[i].childs.length > 0) {\n            changeAray(oldArray[i].childs)\n          }\n        }\n      }\n      changeAray(_this.parentDataList)\n    },\n    changeToMenu() {\n      _this.showMenuBlock = true\n      _this.showPointBlock = false\n      _this.notPointDataList = []\n      this.changeArays()\n    },\n    changeToPoints() {\n      _this.showMenuBlock = false\n      _this.showPointBlock = true\n      _this.formMenu = _this.formPoints\n      _this.formMenu.pid = _this.formPoints.pid\n      _this.formMenu.code = _this.formPoints.code\n      _this.formMenu.title = _this.formPoints.title\n      _this.notPointDataList = []\n      this.changeArays()\n    },\n    // 退出\n    handleClose() {\n      this.$emit('handleCloseModal')\n    },\n    // 菜单和权限点选择：编辑\n    handle_Edit(object) {\n      update(this.formMenu).then(() => {\n        this.$emit('handleCloseModal')\n        this.$emit('newDataes', this.formMenu)\n      })\n    },\n    // 菜单和权限点选择：添加\n    select_Add() {\n      add(this.formMenu).then(() => {\n        _this.handleResetForm()\n        // _this.type = 'menu'\n        this.$emit('handleCloseModal')\n        this.$emit('newDataes', this.formMenu)\n      })\n    },\n    handle_Add(object) {\n      if (_this.type === 'points') {\n        this.formMenu.is_point = true\n        this.select_Add()\n      } else {\n        this.formMenu.is_point = false\n        this.select_Add()\n      }\n    },\n    // 表单提交\n    handleSubmit(object) {\n      _this.formMenu.pid = Number(_this.formMenu.pid)\n      if (_this.formMenu.id) {\n        var thisCode = _this.formMenu.code // 输入的code值\n        if (thisCode === this.codepast) {\n          // Code不变\n          this.$refs.formMenu.validateField('title')\n          _this.handle_Edit(object)\n        } else {\n          // Code变化\n          _this.$refs[object].validate(valid => {\n            if (valid) {\n              _this.handle_Edit(object)\n            } else {\n              this.$Message.error('表单验证失败')\n            }\n          })\n        }\n      } else {\n        _this.$refs[object].validate(valid => {\n          if (valid) {\n            _this.handle_Add(object)\n          } else {\n            this.$Message.error('表单验证失败')\n          }\n        })\n      }\n    },\n    // 表单详情\n    dataRest(obj) {\n      for (var i = 0; i < obj.length; i++) {\n        if (obj[i].childs && obj[i].childs.length > 0) {\n          for (var j = 0; j < obj[i].childs.length; j++) {\n            this.$set(obj[i].childs[j], 'layer', 1)\n          }\n        }\n\n        this.$set(obj[i], 'layer', 0)\n      }\n    },\n    hanldeEditForm(objeditId) {\n      this.formMenu.id = objeditId\n      list().then(data => {\n        _this.parentDataList = data.data\n        _this.notPointDataList = []\n        this.dataRest(data.data)\n        this.changeArays()\n      })\n      detail({ id: objeditId }).then(data => {\n        this.formMenu.id = data.data.id\n        this.formMenu.pid = data.data.pid\n        this.formMenu.title = data.data.title\n        this.formMenu.code = data.data.code\n        this.formMenu.is_point = data.data.is_point\n        let responseData = data.data\n        let choose = this.type\n        if (choose === 'points') {\n          this.formMenu.code = data.data.code\n        }\n        if (responseData.pid === null) {\n          this.formMenu.pid = 0\n        }\n      })\n    },\n    // 表单重置\n    handleResetForm() {\n      this.formMenu.id = ''\n      this.formMenu.pid = 0\n      this.formMenu.title = ''\n      this.formMenu.code = ''\n      _this.typeStatus = false\n      _this.type = 'menu'\n      list().then(data => {\n        _this.parentDataList = data.data\n        _this.notPointDataList = _this.parentDataList\n        this.dataRest(data.data)\n        _this.changeToMenu()\n      })\n    }\n  },\n  // 挂载结束\n  mounted: function() {},\n  // 创建完毕状态\n  created() {\n    _this = this\n  },\n  // 组件更新\n  updated: function() {}\n}\n</script>\n<style>\n.el-form--label-left .el-form-item__label {\n  text-align: right;\n}\n.el-dialog__footer {\n  text-align: right;\n}\n.moveIn0 {\n  text-indent: 14px;\n}\n\n.moveIn1 {\n  text-indent: 28px;\n}\n</style>\n<style scoped lang=\"scss\">\n.el-fade-in-linear-enter-active,\n.el-fade-in-linear-leave-active,\n.fade-in-linear-enter-active,\n.fade-in-linear-leave-active {\n  transition: opacity 0.2s linear;\n}\n\n.el-fade-in-enter,\n.el-fade-in-leave-active,\n.el-fade-in-linear-enter,\n.el-fade-in-linear-leave,\n.el-fade-in-linear-leave-active,\n.fade-in-linear-enter,\n.fade-in-linear-leave,\n.fade-in-linear-leave-active {\n  opacity: 0;\n}\n\n.select-search {\n  a {\n    color: #333;\n    text-decoration: none;\n    padding: 5px;\n  }\n  ul {\n    list-style: none;\n    padding: 6px 0;\n    margin: 0;\n    overflow: visible;\n    li {\n      display: block;\n      width: 100%;\n      padding: 5px;\n      font-size: 14px;\n      padding: 8px 10px;\n      position: relative;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: #48576a;\n      height: 36px;\n      line-height: 1.5;\n      box-sizing: border-box;\n      cursor: pointer;\n      &.active {\n        background-color: #20a0ff;\n        a {\n          color: #fff;\n        }\n      }\n    }\n  }\n  .select-header {\n    position: relative;\n    border-radius: 4px;\n    border: 1px solid #bfcbd9;\n    outline: 0;\n    padding: 0 8px;\n    > input {\n      border: none;\n      -webkit-appearance: none;\n      -moz-appearance: none;\n      appearance: none;\n      width: 100%;\n      outline: 0;\n      box-sizing: border-box;\n      color: #1f2d3d;\n      font-size: inherit;\n      height: 36px;\n      line-height: 1;\n    }\n    > i {\n      transition: all 0.3s linear;\n      display: inline-block;\n      position: absolute;\n      right: 3%;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n  }\n  .select-body {\n    z-index: 1000;\n    border-radius: 2px;\n    background-color: #fff;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n    box-sizing: border-box;\n    margin: 5px 0;\n    padding: 8px;\n    > input {\n      -webkit-appearance: none;\n      -moz-appearance: none;\n      appearance: none;\n      background-color: #fff;\n      background-image: none;\n      border-radius: 4px;\n      border: 1px solid #bfcbd9;\n      box-sizing: border-box;\n      color: #1f2d3d;\n      font-size: inherit;\n      height: 36px;\n      line-height: 1;\n      outline: 0;\n      padding: 3px 10px;\n      transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\n      width: 100%;\n      display: inline-block;\n    }\n  }\n}\n</style>\n\n作者：CRPER\n链接：https://juejin.im/post/5972ea2f6fb9a06bc569204f\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n\n\n// WEBPACK FOOTER //\n// src/module-manage/components/menu-add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form\"},[_c('el-dialog',{attrs:{\"title\":_vm.text+_vm.pageTitle,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"formMenu\",staticStyle:{\"width\":\"400px\",\"margin-left\":\"120px\"},attrs:{\"rules\":_vm.ruleInline,\"model\":_vm.formMenu,\"label-position\":\"left\",\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('table.permissionUser')}},[_c('el-radio-group',{staticClass:\"choose-type\",on:{\"change\":_vm.handleChooseType},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},[_c('el-radio',{staticClass:\"choose-item\",attrs:{\"label\":\"menu\",\"disabled\":_vm.typeStatus}},[_vm._v(\"菜单\")]),_vm._v(\" \"),_c('el-radio',{staticClass:\"choose-item\",attrs:{\"label\":\"points\",\"disabled\":_vm.typeStatus}},[_vm._v(\"权限点\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('table.permissionUser')}},[_c('el-select',{model:{value:(_vm.formMenu.pid),callback:function ($$v) {_vm.$set(_vm.formMenu, \"pid\", $$v)},expression:\"formMenu.pid\"}},[_c('el-option',{attrs:{\"value\":0,\"label\":_vm.$t('table.powerNav')}},[_vm._v(\"主导航\")]),_vm._v(\" \"),_vm._l((_vm.notPointDataList),function(items){return _c('el-option',{key:items.id,class:'moveIn'+items.layer,attrs:{\"value\":items.id,\"label\":items.title,\"disabled\":(_vm.type === 'points') && !!(items.childs)}})})],2)],1),_vm._v(\" \"),(_vm.showMenuBlock)?_c('div',[_c('el-form-item',{attrs:{\"label\":_vm.$t('table.powerCode'),\"prop\":\"code\"}},[_c('el-input',{model:{value:(_vm.formMenu.code),callback:function ($$v) {_vm.$set(_vm.formMenu, \"code\", $$v)},expression:\"formMenu.code\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('table.powerTitle'),\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.formMenu.title),callback:function ($$v) {_vm.$set(_vm.formMenu, \"title\", $$v)},expression:\"formMenu.title\"}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.showPointBlock)?_c('div',{attrs:{\"model\":_vm.formPoints}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('table.powerCode'),\"prop\":\"code\"}},[_c('el-input',{model:{value:(_vm.formPoints.code),callback:function ($$v) {_vm.$set(_vm.formPoints, \"code\", $$v)},expression:\"formPoints.code\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('table.powerTitle'),\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.formPoints.title),callback:function ($$v) {_vm.$set(_vm.formPoints, \"title\", $$v)},expression:\"formPoints.title\"}})],1)],1):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.handleClose}},[_vm._v(_vm._s(_vm.$t('table.cancel')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('formMenu')}}},[_vm._v(_vm._s(_vm.$t('table.confirm')))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6d3af64f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module-manage/components/menu-add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6d3af64f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./menu-add.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6d3af64f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./menu-add.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./menu-add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./menu-add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6d3af64f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./menu-add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6d3af64f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module-manage/components/menu-add.vue\n// module id = null\n// module chunks = ","/*\n* @Author: sunlandong\n* @Date:   2017-03-11 12:06:49\n* @Last Modified by:   sunlandong\n* @Last Modified time: 2017-03-11 16:30:03\n*/\n\nimport Vue from 'vue'\nfunction DataTransfer (data) {\n  if (!(this instanceof DataTransfer)) {\n    return new DataTransfer(data, null, null)\n  }\n}\n\nDataTransfer.treeToArray = function (data, parent, level, expandedAll) {\n  let tmp = []\n  Array.from(data).forEach(function (record) {\n    if (record._expanded === undefined) {\n      Vue.set(record, '_expanded', expandedAll)\n    }\n    if (parent) {\n      Vue.set(record, '_parent', parent)\n    }\n    let _level = 0\n    if (level !== undefined && level !== null) {\n      _level = level + 1\n    }\n    Vue.set(record, '_level', _level)\n    tmp.push(record)\n    if (record.childs && record.childs.length > 0) {\n      let childs = DataTransfer.treeToArray(record.childs, record, _level, expandedAll)\n      tmp = tmp.concat(childs)\n    }\n    if (record.points && record.points.length > 0) {\n      let points = DataTransfer.treeToArray(record.points, record, _level, expandedAll)\n      tmp = tmp.concat(points)\n    }\n  })\n  return tmp\n}\n\nexport default DataTransfer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/TreeTable/utils/dataTranslate.js"],"sourceRoot":""}